<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Notes/store/note.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Notes/store/note.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @Module useCurrentNoteStore
 * @description Vuex-стор для работы с заметками в компоненте src/components/Todoo.vue.
 * Этот стор управляет состоянием заметок, включая их добавление, изменение и удаление.
 * @property {Object} notes - Список заметок из хранилища
 * 
 * 
 * @vue-event {Number} setNotes - Устанавливает значения
 * @vue-event {Number} getNotes - Получает список заметок или пустой массив, если заметки не загружены
 * @vue-event {Number} addNote  - Добавляет новую заметку
 * @vue-event {Number} setNote  - Функция для изменения заметки
 * @vue-event {Number} deleteNote - Удаляет заметку
 * 
 * 
 *
 */



import { defineStore } from "pinia";
import { getAll, apiSetNote } from "../api";

/**
 * Класс для работы с заметками.
 */
export const useCurrentNoteStore = defineStore("CurrentNote", {
    state: () => ({
        notes: null, // Список заметок
    }),

    getters: {
        // Здесь можно добавить геттеры, если они понадобятся
    },

    actions: {
        setNotes() {
            this.notes = getAll();
        },

        getNotes() {
            if (this.notes === null) {
                this.notes = getAll();
            }
            return this.notes;
        },

        addNote() {
            const Id =
                (this.notes.length > 0
                    ? Math.max(
                          ...this.notes.map((note) =>
                              typeof note.id === "number" ? note.id : -Infinity
                          )
                      )
                    : 0) + 1;
            const currentTime = new Date().toISOString();
            this.notes.push({ id: Id, created_at: currentTime });
            return Id;
        },

        setNote(item) {
            const index = this.notes.findIndex((note) => note.id === item.id);
            if (index !== -1) {
                this.notes[index] = item;
                apiSetNote(item);
            }
        },

        /**
         * Удаляет заметку.
         * @param {number} id - Id заметки, которую нужно удалить.
         * @returns {void} Не возвращает значения.
         */
        deleteNote(id) {
            const index = this.notes.findIndex((note) => note.id === id);
            if (index !== -1) {
                this.notes.splice(index, 1); // Удаляем элемент из массива
            }
        },
    },
    persist: true,
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Todoo%2520component.html">Todoo component</a></li><li><a href="module-useCurrentNoteStore.html">useCurrentNoteStore</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Feb 14 2025 12:31:02 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
